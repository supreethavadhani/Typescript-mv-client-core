import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { MatSort } from '@angular/material/sort';
import { MatTableDataSource, MatTable } from '@angular/material/table';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "@angular/material/button";
import * as i3 from "@angular/material/icon";
import * as i4 from "@angular/material/form-field";
import * as i5 from "@angular/material/input";
import * as i6 from "@angular/material/paginator";
import * as i7 from "@angular/material/sort";
import * as i8 from "@angular/material/table";
export class MvTableComponent {
    constructor() {
        this.editAction = new EventEmitter();
        this.tableData = { data: [], metaData: {} };
        this.values = [];
        this.colored = [];
        this.separatorKeysCodes = [13, 9, 188];
        this.isView = 'auto';
        this.dropdownShow = false;
        this.filters = {};
    }
    update() {
        this.isView = this.tableData.metaData.view ? 'pointer' : 'auto';
        this.tableData = this.tableGridData;
        this.columns = this.tableData.metaData.column_names;
        this.tempDatasource = this.tableGridData.data;
        this.tempDatasource = this.tableGridData.data;
        this.tableData.metaData.column_names = this.tableData.metaData.column_names.concat(['edit']);
        this.dataSource = new MatTableDataSource(this.tableData.data);
        this.dataSource.sort = this.sort;
    }
    getColumnData(fd) {
        let tableData = {
            data: [],
            metaData: {
                column_names: [],
                display_names: {},
            },
        };
        fd.form.fields.forEach(i => {
            if (i.controlType == 'Input') {
                tableData.metaData.column_names.push(i.name);
                tableData.metaData.display_names[i.name] = i.label;
            }
        });
        return tableData;
    }
    fetchRowNumberEdit(rowData) {
        this.rowNumber = this.tempDatasource.indexOf(rowData);
        console.log(this.rowNumber);
        this.editAction.next(this.rowNumber);
    }
    applyFilter(filterValue) {
        if (this.dataSource)
            this.dataSource.filter = filterValue.trim().toLowerCase();
    }
}
MvTableComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.1.3", ngImport: i0, type: MvTableComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
MvTableComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.1.3", type: MvTableComponent, selector: "app-mv-table", inputs: { tableGridData: "tableGridData" }, outputs: { editAction: "editAction" }, viewQueries: [{ propertyName: "table", first: true, predicate: MatTable, descendants: true, static: true }, { propertyName: "sort", first: true, predicate: MatSort, descendants: true, static: true }], ngImport: i0, template: "<div class=\"table-container\" id=\"tableContainer\">\r\n  <mat-form-field appearance=\"fill\" style=\"margin:1.2rem\">\r\n    <mat-label>Search for Records</mat-label>\r\n    <input matInput style=\"width:100%; font-family: Roboto-Light;font-size: 0.8333vw;\" placeholder=\"Search Records\"\r\n      (keyup)=\"applyFilter($event.target.value)\" />\r\n    <mat-icon matSuffix>search</mat-icon>\r\n  </mat-form-field>\r\n  <table mat-table [dataSource]=\"dataSource\" matSort>\r\n    <ng-container *ngFor=\"let i of tableData.metaData.column_names; let index=index\" matColumnDef=\"{{i}}\">\r\n      <ng-container *ngIf=\"i=='edit'; else dataPart\">\r\n        <th mat-header-cell *matHeaderCellDef>\r\n        </th>\r\n        <td style=\"padding-right: 14px;\" mat-cell *matCellDef=\"let element;let rowData=$implicit;\" class=\"edit\"\r\n          (click)=\"fetchRowNumberEdit(rowData)\"><button style=\"outline: none;color:#004faa\" mat-button>EDIT</button></td>\r\n      </ng-container>\r\n      <ng-template #dataPart>\r\n        <th mat-header-cell *matHeaderCellDef mat-sort-header>\r\n          {{tableData.metaData.display_names[i]}}\r\n        </th>\r\n        <td mat-cell *matCellDef=\"let element;\">{{element[i]}}</td>\r\n      </ng-template>\r\n    </ng-container>\r\n    <tr mat-header-row *matHeaderRowDef=\" tableData.metaData.column_names;sticky: true\"></tr>\r\n    <tr mat-row *matRowDef=\"let row; columns: tableData.metaData.column_names;\"></tr>\r\n    <mat-paginator [pageSizeOptions]=\"[5, 10, 20]\" showFirstLastButtons aria-label=\"Select page of periodic elements\">\r\n    </mat-paginator>\r\n  </table>\r\n</div>\r\n", styles: [".table-container{max-height:85vh;overflow:auto}table{width:100%}tr.mat-header-row{height:3.125rem;font-weight:700}th{height:3.125rem;font-family:Lato!important;font-size:1.3rem;color:#004faa;border-bottom:none!important}td{height:3.125rem;cursor:pointer;border-bottom:1px dashed #e0e0e0!important;font-size:1.2rem;color:#0009}:host ::ng-deep .mat-form-field-wrapper{padding-bottom:0!important}:host ::ng-deep .mat-form-field-infix{width:auto}tr.mat-row,tr.mat-footer-row{height:5rem}\n"], dependencies: [{ kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i2.MatButton, selector: "button[mat-button], button[mat-raised-button], button[mat-icon-button],             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],             button[mat-flat-button]", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { kind: "component", type: i3.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "component", type: i4.MatFormField, selector: "mat-form-field", inputs: ["color", "appearance", "hideRequiredMarker", "hintLabel", "floatLabel"], exportAs: ["matFormField"] }, { kind: "directive", type: i4.MatLabel, selector: "mat-label" }, { kind: "directive", type: i4.MatSuffix, selector: "[matSuffix]" }, { kind: "directive", type: i5.MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["disabled", "id", "placeholder", "name", "required", "type", "errorStateMatcher", "aria-describedby", "value", "readonly"], exportAs: ["matInput"] }, { kind: "component", type: i6.MatPaginator, selector: "mat-paginator", inputs: ["disabled"], exportAs: ["matPaginator"] }, { kind: "directive", type: i7.MatSort, selector: "[matSort]", inputs: ["matSortDisabled", "matSortActive", "matSortStart", "matSortDirection", "matSortDisableClear"], outputs: ["matSortChange"], exportAs: ["matSort"] }, { kind: "component", type: i7.MatSortHeader, selector: "[mat-sort-header]", inputs: ["disabled", "mat-sort-header", "arrowPosition", "start", "sortActionDescription", "disableClear"], exportAs: ["matSortHeader"] }, { kind: "component", type: i8.MatTable, selector: "mat-table, table[mat-table]", exportAs: ["matTable"] }, { kind: "directive", type: i8.MatHeaderCellDef, selector: "[matHeaderCellDef]" }, { kind: "directive", type: i8.MatHeaderRowDef, selector: "[matHeaderRowDef]", inputs: ["matHeaderRowDef", "matHeaderRowDefSticky"] }, { kind: "directive", type: i8.MatColumnDef, selector: "[matColumnDef]", inputs: ["sticky", "matColumnDef"] }, { kind: "directive", type: i8.MatCellDef, selector: "[matCellDef]" }, { kind: "directive", type: i8.MatRowDef, selector: "[matRowDef]", inputs: ["matRowDefColumns", "matRowDefWhen"] }, { kind: "directive", type: i8.MatHeaderCell, selector: "mat-header-cell, th[mat-header-cell]" }, { kind: "directive", type: i8.MatCell, selector: "mat-cell, td[mat-cell]" }, { kind: "component", type: i8.MatHeaderRow, selector: "mat-header-row, tr[mat-header-row]", exportAs: ["matHeaderRow"] }, { kind: "component", type: i8.MatRow, selector: "mat-row, tr[mat-row]", exportAs: ["matRow"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.1.3", ngImport: i0, type: MvTableComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-mv-table', template: "<div class=\"table-container\" id=\"tableContainer\">\r\n  <mat-form-field appearance=\"fill\" style=\"margin:1.2rem\">\r\n    <mat-label>Search for Records</mat-label>\r\n    <input matInput style=\"width:100%; font-family: Roboto-Light;font-size: 0.8333vw;\" placeholder=\"Search Records\"\r\n      (keyup)=\"applyFilter($event.target.value)\" />\r\n    <mat-icon matSuffix>search</mat-icon>\r\n  </mat-form-field>\r\n  <table mat-table [dataSource]=\"dataSource\" matSort>\r\n    <ng-container *ngFor=\"let i of tableData.metaData.column_names; let index=index\" matColumnDef=\"{{i}}\">\r\n      <ng-container *ngIf=\"i=='edit'; else dataPart\">\r\n        <th mat-header-cell *matHeaderCellDef>\r\n        </th>\r\n        <td style=\"padding-right: 14px;\" mat-cell *matCellDef=\"let element;let rowData=$implicit;\" class=\"edit\"\r\n          (click)=\"fetchRowNumberEdit(rowData)\"><button style=\"outline: none;color:#004faa\" mat-button>EDIT</button></td>\r\n      </ng-container>\r\n      <ng-template #dataPart>\r\n        <th mat-header-cell *matHeaderCellDef mat-sort-header>\r\n          {{tableData.metaData.display_names[i]}}\r\n        </th>\r\n        <td mat-cell *matCellDef=\"let element;\">{{element[i]}}</td>\r\n      </ng-template>\r\n    </ng-container>\r\n    <tr mat-header-row *matHeaderRowDef=\" tableData.metaData.column_names;sticky: true\"></tr>\r\n    <tr mat-row *matRowDef=\"let row; columns: tableData.metaData.column_names;\"></tr>\r\n    <mat-paginator [pageSizeOptions]=\"[5, 10, 20]\" showFirstLastButtons aria-label=\"Select page of periodic elements\">\r\n    </mat-paginator>\r\n  </table>\r\n</div>\r\n", styles: [".table-container{max-height:85vh;overflow:auto}table{width:100%}tr.mat-header-row{height:3.125rem;font-weight:700}th{height:3.125rem;font-family:Lato!important;font-size:1.3rem;color:#004faa;border-bottom:none!important}td{height:3.125rem;cursor:pointer;border-bottom:1px dashed #e0e0e0!important;font-size:1.2rem;color:#0009}:host ::ng-deep .mat-form-field-wrapper{padding-bottom:0!important}:host ::ng-deep .mat-form-field-infix{width:auto}tr.mat-row,tr.mat-footer-row{height:5rem}\n"] }]
        }], propDecorators: { tableGridData: [{
                type: Input
            }], editAction: [{
                type: Output
            }], table: [{
                type: ViewChild,
                args: [MatTable, { static: true }]
            }], sort: [{
                type: ViewChild,
                args: [MatSort, { static: true }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbXYtY2xpZW50LWNvcmUvc3JjL212LWNvcmUvbXYtY29tcG9uZW50cy9tdi10YWJsZS9jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9tdi1jbGllbnQtY29yZS9zcmMvbXYtY29yZS9tdi1jb21wb25lbnRzL212LXRhYmxlL2NvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBQyxNQUFNLEVBQUMsU0FBUyxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQy9FLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUNqRCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsUUFBUSxFQUFrQixNQUFNLHlCQUF5QixDQUFDOzs7Ozs7Ozs7O0FBV3ZGLE1BQU0sT0FBTyxnQkFBZ0I7SUFON0I7UUFRVyxlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUkzQyxjQUFTLEdBQU8sRUFBQyxJQUFJLEVBQUMsRUFBRSxFQUFDLFFBQVEsRUFBQyxFQUFFLEVBQUMsQ0FBQztRQUV0QyxXQUFNLEdBQWUsRUFBRSxDQUFDO1FBRy9CLFlBQU8sR0FBVSxFQUFFLENBQUE7UUFFVix1QkFBa0IsR0FBYSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDckQsV0FBTSxHQUFXLE1BQU0sQ0FBQztRQUN4QixpQkFBWSxHQUFZLEtBQUssQ0FBQztRQUM5QixZQUFPLEdBQU8sRUFBRSxDQUFDO0tBK0NqQjtJQTVDQSxNQUFNO1FBQ0wsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFBO1FBQy9ELElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQztRQUNwQyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQTtRQUVuRCxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxhQUFjLENBQUMsSUFBSSxDQUFDO1FBQy9DLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLGFBQWMsQ0FBQyxJQUFJLENBQUE7UUFDOUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQzdGLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxrQkFBa0IsQ0FBTSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ25FLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDakMsQ0FBQztJQUVGLGFBQWEsQ0FBQyxFQUFXO1FBQ3hCLElBQUksU0FBUyxHQUFpQjtZQUM3QixJQUFJLEVBQUUsRUFBRTtZQUNSLFFBQVEsRUFBRTtnQkFDUixZQUFZLEVBQUMsRUFDWjtnQkFDRCxhQUFhLEVBQUUsRUFDZDthQUVGO1NBQ0MsQ0FBQztRQUNKLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUEsRUFBRTtZQUMxQixJQUFHLENBQUMsQ0FBQyxXQUFXLElBQUksT0FBTyxFQUFFO2dCQUM3QixTQUFTLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFBO2dCQUM1QyxTQUFTLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQTthQUNqRDtRQUNGLENBQUMsQ0FBQyxDQUFBO1FBQ0YsT0FBTyxTQUFTLENBQUE7SUFDakIsQ0FBQztJQUVELGtCQUFrQixDQUFDLE9BQVc7UUFDN0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN0RCxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUMzQixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVELFdBQVcsQ0FBQyxXQUFtQjtRQUNoQyxJQUFHLElBQUksQ0FBQyxVQUFVO1lBQ2xCLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUN6RCxDQUFDOzs2R0E1RFMsZ0JBQWdCO2lHQUFoQixnQkFBZ0IsOEtBR2pCLFFBQVEscUZBQ1IsT0FBTyw4RENqQm5CLGluREE0QkE7MkZEZmEsZ0JBQWdCO2tCQU41QixTQUFTOytCQUNDLGNBQWM7OEJBTWYsYUFBYTtzQkFBckIsS0FBSztnQkFDSSxVQUFVO3NCQUFuQixNQUFNO2dCQUM0QixLQUFLO3NCQUF2QyxTQUFTO3VCQUFDLFFBQVEsRUFBQyxFQUFDLE1BQU0sRUFBQyxJQUFJLEVBQUM7Z0JBQ0csSUFBSTtzQkFBdkMsU0FBUzt1QkFBQyxPQUFPLEVBQUUsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LE91dHB1dCxWaWV3Q2hpbGR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBNYXRTb3J0IH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvc29ydCc7XHJcbmltcG9ydCB7IE1hdFRhYmxlRGF0YVNvdXJjZSwgTWF0VGFibGUsIE1hdFRhYmxlTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvdGFibGUnO1xyXG5pbXBvcnQgeyBWbyB9IGZyb20gJy4uLy4uL212LWZvcm0tY29yZS90eXBlcyc7XHJcbmltcG9ydCB7IEZvcm1EYXRhIH0gZnJvbSAnLi4vLi4vbXYtZm9ybS1jb3JlL2Zvcm1EYXRhJztcclxuXHJcblxyXG5AQ29tcG9uZW50KHtcclxuXHRzZWxlY3RvcjogJ2FwcC1tdi10YWJsZScsXHJcblx0dGVtcGxhdGVVcmw6ICcuL2NvbXBvbmVudC5odG1sJyxcclxuXHRzdHlsZVVybHM6WycuL2NvbXBvbmVudC5zY3NzJ11cclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBNdlRhYmxlQ29tcG9uZW50IHtcclxuXHRASW5wdXQoKSB0YWJsZUdyaWREYXRhOlRhYmxlTWV0YURhdGEgfCB1bmRlZmluZWQ7XHJcblx0QE91dHB1dCgpIGVkaXRBY3Rpb24gPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcclxuXHRAVmlld0NoaWxkKE1hdFRhYmxlLHtzdGF0aWM6dHJ1ZX0pIHRhYmxlOiBNYXRUYWJsZTxhbnk+IHwgdW5kZWZpbmVkO1xyXG5cdEBWaWV3Q2hpbGQoTWF0U29ydCwge3N0YXRpYzogdHJ1ZX0pIHNvcnQ6IE1hdFNvcnQgfCB1bmRlZmluZWQ7XHJcblx0XHJcblx0cHVibGljIHRhYmxlRGF0YTphbnkgPSB7ZGF0YTpbXSxtZXRhRGF0YTp7fX07XHJcblx0cHVibGljIGRhdGFTb3VyY2U6YW55O1xyXG5cdHB1YmxpYyB2YWx1ZXM6IEFycmF5PGFueT4gPSBbXTtcclxuXHRwdWJsaWMgdGVtcERhdGFzb3VyY2U6IGFueTtcclxuXHRwdWJsaWMgcm93TnVtYmVyOmFueTtcclxuXHRjb2xvcmVkOiBhbnlbXSA9IFtdXHJcblxyXG5cdHJlYWRvbmx5IHNlcGFyYXRvcktleXNDb2RlczogbnVtYmVyW10gPSBbMTMsIDksIDE4OF07XHJcblx0aXNWaWV3OiBzdHJpbmcgPSAnYXV0byc7XHJcblx0ZHJvcGRvd25TaG93OiBib29sZWFuID0gZmFsc2U7XHJcblx0ZmlsdGVyczoge30gPSB7fTtcclxuXHRjb2x1bW5zOiBhbnk7XHJcblxyXG5cdHVwZGF0ZSgpIHtcclxuXHRcdHRoaXMuaXNWaWV3ID0gdGhpcy50YWJsZURhdGEubWV0YURhdGEudmlldyA/ICdwb2ludGVyJyA6ICdhdXRvJ1xyXG5cdFx0dGhpcy50YWJsZURhdGEgPSB0aGlzLnRhYmxlR3JpZERhdGE7XHJcblx0XHR0aGlzLmNvbHVtbnMgPSB0aGlzLnRhYmxlRGF0YS5tZXRhRGF0YS5jb2x1bW5fbmFtZXNcclxuXHJcblx0XHR0aGlzLnRlbXBEYXRhc291cmNlID0gdGhpcy50YWJsZUdyaWREYXRhIS5kYXRhO1xyXG5cdFx0dGhpcy50ZW1wRGF0YXNvdXJjZSA9IHRoaXMudGFibGVHcmlkRGF0YSEuZGF0YVxyXG5cdFx0dGhpcy50YWJsZURhdGEubWV0YURhdGEuY29sdW1uX25hbWVzID0gdGhpcy50YWJsZURhdGEubWV0YURhdGEuY29sdW1uX25hbWVzLmNvbmNhdChbJ2VkaXQnXSk7XHJcblx0XHR0aGlzLmRhdGFTb3VyY2UgPSBuZXcgTWF0VGFibGVEYXRhU291cmNlPGFueT4odGhpcy50YWJsZURhdGEuZGF0YSk7XHJcblx0XHR0aGlzLmRhdGFTb3VyY2Uuc29ydCA9IHRoaXMuc29ydDtcclxuXHRcdH1cclxuXHJcblx0Z2V0Q29sdW1uRGF0YShmZDpGb3JtRGF0YSl7XHJcblx0XHRsZXQgdGFibGVEYXRhOlRhYmxlTWV0YURhdGEgPSB7XHJcblx0XHRcdGRhdGE6IFtdLFxyXG5cdFx0XHRtZXRhRGF0YToge1xyXG5cdFx0XHQgIGNvbHVtbl9uYW1lczpbXHJcblx0XHRcdCAgXSxcclxuXHRcdFx0ICBkaXNwbGF5X25hbWVzOiB7IFxyXG5cdFx0XHQgIH0sXHJcblx0ICBcclxuXHRcdFx0fSxcclxuXHRcdCAgfTtcclxuXHRcdGZkLmZvcm0uZmllbGRzIS5mb3JFYWNoKGk9PntcclxuXHRcdFx0aWYoaS5jb250cm9sVHlwZSA9PSAnSW5wdXQnKSB7XHJcblx0XHRcdHRhYmxlRGF0YS5tZXRhRGF0YS5jb2x1bW5fbmFtZXMucHVzaChpLm5hbWUpXHJcblx0XHRcdHRhYmxlRGF0YS5tZXRhRGF0YS5kaXNwbGF5X25hbWVzW2kubmFtZV0gPSBpLmxhYmVsXHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHRyZXR1cm4gdGFibGVEYXRhXHJcblx0fVxyXG5cclxuXHRmZXRjaFJvd051bWJlckVkaXQocm93RGF0YTphbnkpIHtcclxuXHRcdHRoaXMucm93TnVtYmVyID0gdGhpcy50ZW1wRGF0YXNvdXJjZS5pbmRleE9mKHJvd0RhdGEpO1xyXG5cdFx0Y29uc29sZS5sb2codGhpcy5yb3dOdW1iZXIpXHJcblx0XHR0aGlzLmVkaXRBY3Rpb24ubmV4dCh0aGlzLnJvd051bWJlcik7XHJcblx0ICB9XHJcblxyXG5cdCAgYXBwbHlGaWx0ZXIoZmlsdGVyVmFsdWU6IHN0cmluZykge1xyXG5cdFx0aWYodGhpcy5kYXRhU291cmNlKVxyXG5cdFx0dGhpcy5kYXRhU291cmNlLmZpbHRlciA9IGZpbHRlclZhbHVlLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG5cdCAgfVxyXG5cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGFibGVNZXRhRGF0YXtcclxuXHRkYXRhOlZvW10sXHJcblx0bWV0YURhdGE6e1xyXG5cdFx0Y29sdW1uX25hbWVzOnN0cmluZ1tdLFxyXG5cdFx0ZGlzcGxheV9uYW1lczp7W2tleTpzdHJpbmddOnN0cmluZ30sXHJcblx0XHRlZGl0YWJsZV9jb2x1bW5zPzpzdHJpbmdbXSxcclxuXHRcdGJhZGdlc0NvbHVtbj86c3RyaW5nLFxyXG5cdFx0ZGlzYWJsZUJhZGdlcz86Ym9vbGVhbixcclxuXHRcdGFsbFNlbGVjdGVkPzpib29sZWFuLFxyXG5cdFx0dmlldz86Ym9vbGVhbixcclxuXHRcdGVkaXQ/OmJvb2xlYW4sXHJcblx0XHRzZWFyY2g/OmJvb2xlYW4sXHJcblx0XHRwbGFjZWhvbGRlcj86c3RyaW5nLFxyXG5cdFx0c2VsZWN0QXR0cj86c3RyaW5nLFxyXG5cdFx0ZXJyb3I/OnN0cmluZyxcclxuXHRcdGJ1dHRvbk5hbWU/OiBzdHJpbmcsXHJcblx0XHR2YWxpZGF0aW9ucz86e1trZXk6c3RyaW5nXTogVmFsaWRhdG9yc30sXHJcblx0XHRtYW5hZ2VyRnVuY3Rpb24/OiBzdHJpbmcsXHJcblx0XHRpdGVtTmFtZT86IHN0cmluZyxcclxuXHRcdHN0eWxlQXR0cmlidXRlPzogeyBba2V5OnN0cmluZ106IEFycmF5PFN0eWxlQ29tcGFyaXNvbj4gfVxyXG5cdH0sXHRcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTdHlsZUNvbXBhcmlzb24ge1xyXG5cdGNvbXA6ICc9JyB8ICc+JyB8ICc8JyB8ICc+PScgfCAnPD0nIHwgJyE9JyxcclxuXHR2YWx1ZTogYW55LFxyXG5cdGRlcGVuZGVudENvbD86IHN0cmluZyxcclxuXHRzdHlsZTogYW55LFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRvcnN7XHJcblx0bWluTGVuZ3RoPzpudW1iZXIsXHJcblx0bWF4TGVuZ3RoPzpudW1iZXIsXHJcblx0bWluVmFsdWU/Om51bWJlcixcclxuXHRtYXhWYWx1ZT86bnVtYmVyLFxyXG5cdHBhdHRlcm4/OnN0cmluZyxcclxufVxyXG4iLCI8ZGl2IGNsYXNzPVwidGFibGUtY29udGFpbmVyXCIgaWQ9XCJ0YWJsZUNvbnRhaW5lclwiPlxyXG4gIDxtYXQtZm9ybS1maWVsZCBhcHBlYXJhbmNlPVwiZmlsbFwiIHN0eWxlPVwibWFyZ2luOjEuMnJlbVwiPlxyXG4gICAgPG1hdC1sYWJlbD5TZWFyY2ggZm9yIFJlY29yZHM8L21hdC1sYWJlbD5cclxuICAgIDxpbnB1dCBtYXRJbnB1dCBzdHlsZT1cIndpZHRoOjEwMCU7IGZvbnQtZmFtaWx5OiBSb2JvdG8tTGlnaHQ7Zm9udC1zaXplOiAwLjgzMzN2dztcIiBwbGFjZWhvbGRlcj1cIlNlYXJjaCBSZWNvcmRzXCJcclxuICAgICAgKGtleXVwKT1cImFwcGx5RmlsdGVyKCRldmVudC50YXJnZXQudmFsdWUpXCIgLz5cclxuICAgIDxtYXQtaWNvbiBtYXRTdWZmaXg+c2VhcmNoPC9tYXQtaWNvbj5cclxuICA8L21hdC1mb3JtLWZpZWxkPlxyXG4gIDx0YWJsZSBtYXQtdGFibGUgW2RhdGFTb3VyY2VdPVwiZGF0YVNvdXJjZVwiIG1hdFNvcnQ+XHJcbiAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBpIG9mIHRhYmxlRGF0YS5tZXRhRGF0YS5jb2x1bW5fbmFtZXM7IGxldCBpbmRleD1pbmRleFwiIG1hdENvbHVtbkRlZj1cInt7aX19XCI+XHJcbiAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJpPT0nZWRpdCc7IGVsc2UgZGF0YVBhcnRcIj5cclxuICAgICAgICA8dGggbWF0LWhlYWRlci1jZWxsICptYXRIZWFkZXJDZWxsRGVmPlxyXG4gICAgICAgIDwvdGg+XHJcbiAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZy1yaWdodDogMTRweDtcIiBtYXQtY2VsbCAqbWF0Q2VsbERlZj1cImxldCBlbGVtZW50O2xldCByb3dEYXRhPSRpbXBsaWNpdDtcIiBjbGFzcz1cImVkaXRcIlxyXG4gICAgICAgICAgKGNsaWNrKT1cImZldGNoUm93TnVtYmVyRWRpdChyb3dEYXRhKVwiPjxidXR0b24gc3R5bGU9XCJvdXRsaW5lOiBub25lO2NvbG9yOiMwMDRmYWFcIiBtYXQtYnV0dG9uPkVESVQ8L2J1dHRvbj48L3RkPlxyXG4gICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgPG5nLXRlbXBsYXRlICNkYXRhUGFydD5cclxuICAgICAgICA8dGggbWF0LWhlYWRlci1jZWxsICptYXRIZWFkZXJDZWxsRGVmIG1hdC1zb3J0LWhlYWRlcj5cclxuICAgICAgICAgIHt7dGFibGVEYXRhLm1ldGFEYXRhLmRpc3BsYXlfbmFtZXNbaV19fVxyXG4gICAgICAgIDwvdGg+XHJcbiAgICAgICAgPHRkIG1hdC1jZWxsICptYXRDZWxsRGVmPVwibGV0IGVsZW1lbnQ7XCI+e3tlbGVtZW50W2ldfX08L3RkPlxyXG4gICAgICA8L25nLXRlbXBsYXRlPlxyXG4gICAgPC9uZy1jb250YWluZXI+XHJcbiAgICA8dHIgbWF0LWhlYWRlci1yb3cgKm1hdEhlYWRlclJvd0RlZj1cIiB0YWJsZURhdGEubWV0YURhdGEuY29sdW1uX25hbWVzO3N0aWNreTogdHJ1ZVwiPjwvdHI+XHJcbiAgICA8dHIgbWF0LXJvdyAqbWF0Um93RGVmPVwibGV0IHJvdzsgY29sdW1uczogdGFibGVEYXRhLm1ldGFEYXRhLmNvbHVtbl9uYW1lcztcIj48L3RyPlxyXG4gICAgPG1hdC1wYWdpbmF0b3IgW3BhZ2VTaXplT3B0aW9uc109XCJbNSwgMTAsIDIwXVwiIHNob3dGaXJzdExhc3RCdXR0b25zIGFyaWEtbGFiZWw9XCJTZWxlY3QgcGFnZSBvZiBwZXJpb2RpYyBlbGVtZW50c1wiPlxyXG4gICAgPC9tYXQtcGFnaW5hdG9yPlxyXG4gIDwvdGFibGU+XHJcbjwvZGl2PlxyXG4iXX0=